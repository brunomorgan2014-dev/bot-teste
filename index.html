<!DOCTYPE html>
<html lang="pt-BR">
<body>
  <style>
        .embeddedMessagingConversationButton {
            position: fixed !important;
            left: -5000px !important;
            top: -5000px !important;
            opacity: 0 !important;
        }
        
        .chat-launcher-custom {
            position: fixed;
            right: 32px;
            bottom: 32px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 12px 22px;
            border-radius: 999px;
            background:#f58634;
            color:#FFFFFF;
            font-weight:600;
            font-size:14px;
            border:none;
            cursor:pointer;
            box-shadow:0 6px 16px rgba(0,0,0,.25);
            transition:.2s;
        }
        
        .chat-launcher-custom:hover {
            background:#663399;
            transform: translateY(-1px);
            box-shadow:0 8px 20px rgba(0,0,0,.35);
        }
        
        .chat-launcher-icon {
            color:#663399;
            font-size:16px;
        }

        .chat-launcher-custom:hover .chat-launcher-icon {
            color:#f49739;
            font-size:16px;
        }

        /* Ocultar todas as mensagens de sistema */
        .embeddedMessagingConversationButton .isEventMessage {
            display: none !important;
        }

        /* Ocultar mensagem de entrada do bot */
        .embeddedMessagingConversationButton .messageContent .eventMessage,
        .embeddedMessagingConversationButton .embeddedMessagingEventMessage {
            display: none !important;
        }

        /* Ocultar apenas mensagens de participante entrando/saindo */
        .embeddedMessagingConversationButton .messageContent .eventMessage[data-type="ParticipantChanged"],
        .embeddedMessagingConversationButton .embeddedMessagingEventMessage {
            display: none !important;
        }

        /* Ocultar mensagem de sistema do chat */
        .embeddedMessagingConversationButton .messageContent .eventMessage,
        .embeddedMessagingConversationButton .embeddedMessagingEventMessage {
            display: none !important;
        }

        div.slds-chat-event[lwc-3cjfrt9r4ka] {
            font-size: 0.75em;
            display: none;
        }
    </style>

    <!-- Componente de botão de chat personalizado -->
    <button class="chat-launcher-custom" onclick="iniciarChat()">
        <span class="chat-launcher-icon">✦</span>
        Atendimento  – Grupo Multilixo
    </button>

    <script type="text/javascript">
        function initEmbeddedMessaging() {
            try {
                 embeddedservice_bootstrap.settings.language = "pt_BR";
                embeddedservice_bootstrap.settings.displayHelpButton = false;
                embeddedservice_bootstrap.settings.hideChatButtonOnLoad = true;
                embeddedservice_bootstrap.settings.chatButtonPosition = "-50000px,-50000px";
                embeddedservice_bootstrap.init(
                  '00Dbe0000028Dq9',
                  'ChatGitPage',
                  'https://multilixo--dev.sandbox.my.site.com/ESWChatGitPage1767979154417',
                  {
                      scrt2URL: 'https://multilixo--dev.sandbox.my.salesforce-scrt.com'
                  }
              );
            } catch (err) {
                console.error(err);
            }
        }

        function iniciarChat() {
            const balao = document.getElementById("chatBalloon");
            if (balao) balao.classList.add("hidden");
    
            if (!window.embeddedservice_bootstrap || !embeddedservice_bootstrap.utilAPI) {
                console.error("Embedded Messaging não carregado ainda.");
                if (balao) balao.classList.remove("hidden");
                return;
            }
    
            embeddedservice_bootstrap.utilAPI.launchChat()
                .catch((erro) => {
                    console.error("Erro ao iniciar chat:", erro);
                    if (balao) balao.classList.remove("hidden");
                    alert("Não foi possível iniciar o chat no momento. Tente novamente mais tarde.");
                });
        }
       
    </script>
    
    <script type='text/javascript' src='https://multilixo--dev.sandbox.my.site.com/ESWChatGitPage1767979154417/assets/js/bootstrap.min.js' onload='initEmbeddedMessaging()'></script>
</body>
</html>
